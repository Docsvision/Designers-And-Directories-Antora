= Настроить способ создания карточки

В {wincl}е карточку можно создавать различными способами. Настройка способа создания выполняется отдельно для каждого вида карточки на панели _Режимы создания_ вкладки _Общие_.

.Чтобы настроить новый способ создания карточки определённого вида:
. Выберите в _Дереве видов карточек_ вид, для которого требуется определить способ создания карточек.
. Откройте вкладку _Общие_ и перейдите в область _Режимы создания_.
+
.Область для настройки режима создания карточки
image::card-create-mode-settings.png[Область для настройки режима создания карточки]
+
. Убедитесь, что для вида используются xref:card-kinds/general-inherit.adoc[настройки наследования] _Все собственные_.
. Нажмите на кнопку image:buttons/plus-green.png[Зелёный плюс] в области _Режимы создания_, чтобы открыть окно _Настройка способа создания карточки_.
+
.Настройка способа создания карточки
image::card-create-mode.png[Настройка способа создания карточки]
+
. В данном окне необходимо определить следующие параметры:
+
[horizontal]
Отображаемое название::
Название команды, которая будет вызывать данный режим создания карточки. Название будет отображаться при выборе тех элементов карточки, откуда можно вызвать режим.
+
Способ создания::
Определяет способ создания карточки текущего вида. Значение поля выбирается из списка, включающего следующие значения:
+
По ссылке:::
Создание связанной карточки текущего вида из другой карточки с помощью кнопки *Создать карточку* или элемента управления _Ссылки_. Доступно для всех типов карточек.
+
.При выборе данного значения доступны следующие атрибуты для заполнения:
* Отображаемое название.
* Вид родительской карточки.
* Тип ссылки -- значение выбирается из _Справочника ссылок_.
* Размещение по умолчанию.
* Отображать диалог выбора папки.
* Шаблон.
+
[[by-barcode]]Создать по штрих-коду:::
Создание карточки в автоматическом режиме после сканирования штрих-кода документа ручным сканером. Если карточка с таким штрих-кодом уже существует, она будет открыта. Доступно для карточек типа _Документ_.
+
--
.При выборе данного значения доступны следующие атрибуты для заполнения:
* Размещение по умолчанию.
* Отображать диалог выбора папки.
* Шаблон.
--
+
Для данного способа создания карточки не предусмотрено команды в интерфейсе пользователя. Настройка применяется, когда пользователь выполняет сканирование штрих-кодов карточек ручным сканером при открытом окне {wincl}а.
+
Задание без размещения:::
Создание инициативного задания без размещения доступно для карточек типа _Задание_.
+
В этом случае на ленте инструментов {wincl}а появится кнопка *Создать задание*, включающая подменю со списком из способов настройки заданий без размещения. При отсутствии хотя бы одной настройки способа создания _Задание без размещения_ кнопка на ленте не отображается. Ярлык созданного задания в текущей папке не создаётся, но доступен Администратору в системной папке по пути: _Карточки -- {bo} -- Задание_.
+
Параметр необходим для работы приложений _{dm}_ и _Office Toolbar_.
+
.При выборе данного значения доступны следующие атрибуты для заполнения:
* Отображаемое название.
* Шаблон.
+
Создание документа:::
Создание карточки _Документ_ с определённым способом размещения. Доступно для карточек типа _Документ_. Способ определяется в поле _Размещение по умолчанию_.
+
Параметр необходим для работы приложения _Office Toolbar_.
+
.При выборе данного значения доступны следующие атрибуты для заполнения:
* Размещение по умолчанию.
* Отображать диалог выбора папки.
* Шаблон.
+
Документ без размещения:::
Создание документа без размещения доступно для карточек типа _Документ_.
+
В этом случае на ленте инструментов {wincl}а появится кнопка *Создать документ*, включающая подменю со списком из способов настройки документов без размещения.
+
При отсутствии хотя бы одной настройки способа создания _Документ без размещения_ кнопка на ленте не отображается. Ярлык созданного документа в текущей папке не создаётся, но доступен Администратору в системной папке по пути: _Карточки -- {bo} -- Документ_.
+
Параметр необходим для работы приложений _{dm}_ и _Office Toolbar_. Для каждого вида документов может быть создано несколько режимов создания данного типа. При выборе данного значения доступны следующие атрибуты для заполнения:
+
* Отображаемое название.
* Шаблон.
+
Вид родительской карточки::
Определяет вид родительской карточки -- карточки, из которой создаётся новая карточка текущего вида. По данной настройке также определяется доступность данной команды в {wincl}е.
+
.Содержит следующие значения:
* *_Всё_* -- при выборе данного значения операция редактирования не создаётся.
* *_Вид карточки_* -- выбранный пользователем вид.
+
Тип ссылки::
Определяет тип ссылки, связывающей создаваемую карточку текущего вида с родительской. Позволяет выбрать значения из _Справочника ссылок_.
+
Размещение по умолчанию::
Определяет место расположения создаваемой карточки текущего вида.
+
.Содержит следующие значения:
* *_Без размещения_* -- ярлык на папку не будет отображен в пользовательских папках.
* *_Текущая папка_* -- карточка будет создана в той папке, откуда пользователь открыл родительскую карточку, с учетом следующих особенностей:
+
** Если тип папки _Стандартная_, создаваемая карточка будет создана непосредственно в ней.
** Если тип папки _Делегат_, карточка будет создана в папке-источнике, а в папке-делегате будет автоматически отображен ярлык на данную карточку.
** Если тип папки _Виртуальная_, карточка будет создана без размещения. Это же касается выбранных делегатов на виртуальные папки.
+
* *_Папка родительской карточки_* -- способ размещения аналогичен размещению *_Текущая папка_*, за исключением открытия родительской карточки из папки типа _Виртуальная_. В этом случае дочерняя карточка будет создана в той _Стандартной_ папке, где она была найдена по поисковому запросу виртуальной папки.
* *_Личная папка_* -- карточка будет создана в _Личной_ папке пользователя. Если _Личная_ папка не задана, карточка будет создана без размещения.
* *_Произвольная папка_* -- карточка будет создана в папке, выбранной пользователем, с учетом особенностей использования (типов папок аналогичных значению *_Текущая папка_*).
+
[NOTE]
====
Если родительская карточка была открыта из виртуальной папки, новая карточка будет создана без размещения независимо от указанного в настройках способа создания.
====
+
Отображать диалог выбора папки::
При выставленном флаге будет открываться окно для выбора папки, в которой будут создаваться карточки. Используется для варианта размещения _Произвольная папка_.
+
Шаблон::
Определяет шаблон карточки для создаваемой карточки текущего вида. Выбор значений производится из шаблонов, доступных для выбора в {wincl}е.
+
Операция редактирования::
Определяет операцию редактирования для вида, указанного в поле _Вид родительской карточки_.
+
Поле активно только при выборе в поле _Вид родительской карточки_ любого значения, кроме _Все_. Значения выбираются из списка операций редактирования выбранного вида карточки. При необходимости может быть создана новая операция редактирования.
+
Чтобы создать новую операцию редактирования, нажмите на кнопку image:buttons/plus-grey-frame.png[Плюс на сером фоне] и настройте операцию в окне _Новая операция_. Описание создания операций редактирования содержится в xref:states/designer.adoc[Конструкторе состояний].
+
Отображать команду::
Если флаг установлен, на ленте карточки появится кнопка *Создание карточки*.
+
В выпадающем списке данной кнопки содержатся команды, названия которых указаны в поле _Отображаемое название_, и для которых установлен флаг `*Отображать команду*`.
+
Настройка актуальна, если указан конкретный вид родительской карточки в поле _Вид родительской карточки_. При отсутствии флага способ создания будет активен, но кнопка для создания карточки создаваемого вида не будет отображаться в пользовательском интерфейсе.
+
. Когда все необходимые параметры будут заданы, необходимо нажать на кнопку *ОК*.
+
При создании настройки пользователем, в _Конструкторе состояний_ будет сформирована операция редактирования для соответствующего вида карточки. Название операции будет соответствовать названию в таблице настроек для карточки.
+
По умолчанию операция доступна во всех состояниях. Настройка ограничений по доступности текущей операции в автомате состояний, ролевой модели должна производиться пользователем самостоятельно. Также в xref:layouts/designer.adoc["Конструкторе разметок"] операции могут быть связаны с определёнными элементами интерфейса. При выборе в поле _Вид родительской карточки_ значения *_Все_*, операция редактирования не формируется.
+
.Отображение нового режима создания карточки
image::new-create-mode.png[Отображение нового режима создания карточки]
