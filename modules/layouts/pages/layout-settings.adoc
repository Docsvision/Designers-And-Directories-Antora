= Настройка разметки

Как правило, новые пользовательские разметки создаются на основе разметок базовых типов карточек, входящих в комплект поставки системы {dv}. Базовые разметки, в свою очередь, содержат наборы базовых элементов управления, не предполагающих настройки со стороны пользователя.

Настройка пользовательской разметки предполагает xref:layouts/layout-settings.adoc#add-element[добавление] в базовую разметку дополнительных xref:layouts/controls-standard.adoc[элементов управления] и изменение их свойств. Базовые элементы, которые не предполагается использовать, могут быть скрыты.

Для настройки разметки, выделенной в области _Список разметок_, предназначена область xref:layouts/designer.adoc#layouts["Разметки"] главного окна конструктора.

[#add-element]
== Добавить элемент управления в разметку

Поставляемые элементы управления, которые могу быть добавлены в разметку карточки, располагаются в области xref:layouts/designer.adoc#toolbar["Панель инструментов"] главного окна _Конструктора разметок_.

Любой элемент можно поместить на разметку в область xref:layouts/designer.adoc#layouts["Разметки"] перетащив его мышью.

При перетаскивании элемента управления в разметку карточки, можно сразу же определить его местоположение. Карточки, созданные с помощью _Конструктора разметок_, имеют "табличную" разметку: каждый элемент управления занимает некоторую ячейку, под размеры которой он автоматически подстраивается.

Также верно обратное: в зависимости от размера элемента и расположения на карточке, ячейка получает тот или иной размер.

.При размещении элементов действуют следующие правила:
* Если ячейка единственная в своей "строке", она занимает всю ширину карточки. Если такого поведения не требуется, можно добиться более тонкой настройки, добавляя элемент xref:layouts/std-ctrl/empty-space.adoc[Пустая ячейка], который служит только для форматирования.
* Если в строке с такой ячейкой присутствует другая ячейка, с изменяемой высотой, высота данной ячейки также может быть изменена. Элемент управления свою высоту в любом случае не изменит.

После размещения ячейки на карточке, её местоположение можно изменить перетаскиванием. При этом правила размещения будут такими же как и при добавлении.

Наличие какого-либо элемента в разметке отвечает лишь за внешний вид карточки. Чтобы элемент мог сохранять выбранные значения, необходимо его xref:layouts/controls-settings.adoc[настроить].

.Чтобы добавить в разметку новый элемент управления:
. В области _Панель инструментов_ выберите нужный xref:layouts/controls-standard.adoc[элемент] управления.
. Удерживая нажатой левую клавишу мыши, перетащите элемент из области _Панель инструментов_ в нужное место в разметке карточки.
+
Ещё до того, как вы отпустите левую кнопку мыши, на разметке будет отображаться контур, куда будет помещён элемент: таким образом можно выбрать наиболее удачное расположение вставляемого элемента.
+
.Возможны два варианта:
* Отображается символ границы. В этом случае новая ячейка будет вставлена с соответствующего края существующей ячейки (ячеек).
+
.Вставка новой ячейки у края существующей ячейки
image::edge-cell.png[Вставка новой ячейки у края существующей ячейки]
+
* Отображается рамка. В этом случае новая ячейка займет половину существующей ячейки.
+
.Вставка новой ячейки в уже существующую ячейку
image::cell-in-cell.png[Вставка новой ячейки в уже существующую ячейку]
+
Границы ячеек видны только в режиме редактирования разметки, когда карточка открыта в конструкторе. В каждой конкретной карточке границы ячеек не отображаются, визуально выделяется только ячейка, элемент управления которой является активным в данный момент.
+
Новый элемент появится в разметке карточки.
+
. xref:layouts/controls-settings.adoc[Настройте] элемент управления.

[#remove-element]
== Удалить элемент из разметки

Любой элемент разметки карточки может быть удалён.

Для элементов, которые не являются стандартными для системы {dv}, а подключаются при установке дополнительных модулей и приложений системы (например, _{dm}_), рекомендуется вместо операции удаления скрывать элемент, используя настройку xref:layouts/controls-settings.adoc#visibility[видимости].

.Чтобы удалить элемент из разметки:
. Выделите в области _Разметки_ или области _Структура разметки_ элемент, который требуется удалить.
. Правой клавишей мыши вызовите контекстное меню, затем выберите команду _Удалить элемент_.
+
Элемент перестанет отображаться в разметке.

Дополнительные элементы управления (установленные с дополнительным модулем), станут доступны для добавления в разметку только после повторного открытия _Конструктора разметок_.

[NOTE]
====
Название элемента управления на _Панели инструментов_ может отличаться от названия экземпляра элемента управления, удалённого из разметки.
====

[#group-elements]
== Сгруппировать элементы

Для визуального объединения элементов используется группировка. Эти действия можно совершать при помощи команд контекстного меню.

.Чтобы настроить группировку элементов:
. Удерживая нажатой клавишу kbd:[Shift], в области _Разметки_ или области _Структура разметки_ элемент выделите левой кнопкой мыши элементы, которые требуется сгруппировать.
. Вызовите контекстное меню элемента в дереве структуры разметки и выберите пункт _Группировать_.
+
Для группы будет создана ячейка, в которую будут помещены в данную ячейку.
+
.Группа свойств
image::properties-group.png[Группа свойств]
+
. Поочередно перетащите в данную группу другие элементы, которые требуется объединить.

[#label-text]
== Показать текст метки

Любой элемент управления (базовый, дополнительный или пользовательский), включает текстовое поле xref:layouts/controls-standard.adoc#label["Текст метки"], в котором отображается название поля в запущенной карточке.

Для базовых элементов управления тексты меток изменить нельзя. Для дополнительных элементов управления (добавляемых пользователями из области _Панель инструментов_), текст метки определяется в свойствах элемента. В зависимости от назначения элемента управления, текст метки может быть либо отображен, либо скрыт.

[NOTE]
====
Существует также дополнительный элемент управления xref:layouts/std-ctrl/label.adoc["Метка"], видимость которого определяется не командой _Показать текст метки_, а свойством элемента _Видимость_.
====

.Чтобы отобразить или скрыть текст метки:
. Выделите в области _Разметки_ или области _Структура разметки_ элемент, для которого следует изменить отображение свойства *Текст метки*.
. Правой клавишей мыши вызовите контекстное меню, затем выберите команду _Скрыть текст метки_ или _Отобразить текст метки_.

[#test-position]
== Положение текста

Для элемента разметки карточки может быть настроено свойство xref:layouts/controls-standard.adoc#label["Текст метки"], предназначенное для отображения названия или назначения поля карточки.

По умолчанию текст располагается слева от "рабочей" области элемента. При необходимости расположение текста может быть изменено.

.Чтобы изменить расположение текста метки:
. Выделите в области _Разметки_ или области _Структура разметки_ элемент, для которого следует изменить положение текста метки.
+
.Стандартное расположение текста метки "Положение текста-Слева"
image::label-left.png[Стандартное расположение текста метки "Положение текста-Слева"]
+
. Правой клавишей мыши вызовите контекстное меню, затем выберите команду _Положение элемента_ и желаемое положение.
+
.Команды для изменения положения текста метки
image::context-element.png[Команды для изменения положения текста метки]
+
Положение текста будет изменено в соответствии с выбранной командой.
+
.Пример применения команды "Положение текста-Сверху"
image::label-top.png[Пример применения команды "Положение текста-Сверху"]

[#create-tabs]
== Создать вкладку

При добавлении вкладок необходимо учитывать, что если в разметке карточки имеется группа вкладок, в открытой карточке по умолчанию будет открываться та вкладка из группы, на которой было была сохранена разметка в _Конструкторе разметок_.

.Чтобы создать новую вкладку:
. В области названий вкладок вызовите контекстное меню.
. Выберите команду _Создать группу вкладок_.
. Для добавления новых вкладок выберите команду _Добавить вкладку_.
+
Заданный по умолчанию размер вкладки можно изменить.
+
.Группа вкладок
image::tab-group.png[Группа вкладок]
+
. Измените название вкладки. Для этого либо измените значение свойства xref:layouts/controls-standard.adoc#label["Текст метки"], либо нажмите клавишу kbd:[F2] и отредактируйте название.
. xref:layouts/layout-settings.adoc#add-element[Добавьте] элементы управления на вкладку.

[#empty-cell]
== Создать пустую ячейку

Элемент xref:layouts/std-ctrl/empty-space.adoc["Пустая ячейка"] используется при настройке отображения элементов управления в разметке карточки.

Согласно правилам размещения элементов в разметке, если ячейка элемента единственная в своей "строке", она по умолчанию занимает всю ширину карточки. При помощи пустых ячеек занимаемое элементами пространство может быть ограничено.

.Чтобы создать пустую ячейку, выполните любое из действий:
* В области _Разметки_ или _Структура разметки_ выберите элемент и вызовите на нём контекстное меню, затем выберите команду _Создать пустую ячейку_.
* Перетащите из области _Панель инструментов_ в область _Разметки_ элемент xref:layouts/std-ctrl/empty-space.adoc[Пустая ячейка].

[#limit-size]
== Ограничить размер ячейки

Каждый элемент разметки имеет размер, заданный по умолчанию. Однако, при добавлении в разметку карточки, данный размер может быть изменён пользователем вручную.

Изменение допускается только при отсутствии ограничений, наложенных на размер ячейки. Допускается как полный запрет на изменение размера, так и разрешение на изменение одного из параметров: либо высоты, либо ширины ячейки.

.Чтобы настроить размер ячейки:
. Выделите в области _Разметки_ или области _Структура разметки_ элемент, размер которого требуется изменить.
. Правой кнопкой мыши вызовите контекстное меню, затем выберите одну из доступных команд:
* _По умолчанию_ -- для элемента будет установлен размер, заданный по умолчанию.
* _Нет ограничений_ -- размер элемента можно изменять, растягивая или стягивая границы.
* _Зафиксировать размер_ -- будет сохранен настроенный размер элемента, при этом изменение размера пользователем будет запрещено.
* _Зафиксировать ширину_ -- будет сохранена настроенная ширина элемента и установлен запрет на изменения ширины. При этом изменение высоты элемента будет разрешено.
* _Зафиксировать высоту_ -- будет сохранена настроенная высота элемента и установлен запрет на изменения высоты, при этом изменение ширины элемента будет разрешено.
+
.Команды для управления размером элемента
image::context-size.png[Команды для управления размером элемента]
+
Размер ячейки будет определяться в соответствии с заданным свойством.
