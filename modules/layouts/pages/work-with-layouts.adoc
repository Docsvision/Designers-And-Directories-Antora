= Работа с разметками

Для каждой карточки может быть создано несколько различных разметок, например, для вида, для исполняемой роли и так далее. Каждая разметка может отличаться от другой расположением, размерами и видимостью элементов, а также рядом дополнительных параметров, например, элементами панели инструментов, обязательными полями.

В начале настройки любой карточки для неё по умолчанию предусмотрена одна разметка с названием _Разметка 1_. Например, если пользовательский вид был создан на основании базового типа карточки, _Разметка 1_ будет соответствовать базовому типу.

Для одной карточки можно создать несколько разных разметок. Например, чтобы состав полей карточки мог различаться в зависимости от состояния карточки. Для создания доступных вариантов разметок в конструкторе предусмотрен инструмент _Список разметок_.

.Пример создания нескольких разметок
image::layouts-created.png[Пример создания нескольких разметок]

Переключить разметки можно кликнув на них мышью. При выборе строки в области _Список разметок_, разметка отобразится в области _Разметки_ и будет доступна для редактирования.

[NOTE]
====
При выборе разметки на панели _Список разметок_ в области _Дерево дизайнов_ будет открыт узел условия, к которому привязана текущая разметка.
====

[#new]
== Добавить новую разметку

При работе с конструктором в качестве основы для создания разметок новых карточек рекомендуется использовать разметки базовых типов карточек.

На основе базовых разметок можно создавать пользовательские разметки, добавляя новые или удаляя ненужные элементы. Так как изменение базовых разметок в конструкторе запрещено, для создания пользовательских разметок необходимо предварительно создать пользовательские виды карточек и изменять разметки для данных видов.

При открытии в _Конструкторе разметок_ пользовательского вида карточки в списке разметок уже будет присутствовать одна разметка, которая соответствует базовому типу карточки. Данная разметка по умолчанию имеет название _Разметка 1_. Эту разметку не рекомендуется изменять или добавлять в качестве рабочей для ролей и состояний карточки, так как она не подлежит удалению и её положение не может быть изменено в _Дереве дизайнов_. Чтобы отличать данную разметку, рекомендуется её переименовать, изменив название _Разметка 1_ на _Базовая_. Все изменения следует выполнять с новыми разметки, созданными на основе базовой.

.Чтобы добавить новую пользовательскую разметку:
. В области xref:layouts/designer.adoc#list["Список разметок"] нажмите на кнопку image:buttons/plus-squared.png[Плюс в квадрате] *Добавить разметку*.
+
Новая разметка будет создана с именем формата _Разметка N_, где N -- увеличенный на единицу номер существующей записи с названием _Разметка 1_.
+
.Правила наименования разметок:
****
* Если базовая разметка _Разметка 1_ была переименована (например, в _Базовая_), и записей с номером в списке разметок нет, будет создана новая пользовательская разметка с названием _Разметка 1_. Однако, данная разметка будет являться уже не базовой, а пользовательской.
* Если в списке присутствуют записи с названиями _Разметка N_, однако, нумерация N идет не по порядку (например, часть номеров отсутствует), новые разметки будут создаваться с недостающими номерами.
+
Например, если в списке присутствуют записи с названиями _Разметка 2_, _Разметка 3_, то при создании номера последующих добавляемых разметок будут сформированы как _Разметка 1_ и _Разметка 4_.
****
+
В области появится запись о новой разметке, вид которой будет соответствовать разметке базового типа выбранной карточки.
+
. Переименуйте разметку.

[#rename]
== Переименовать разметку

Рекомендуется переименовывать каждую созданную разметку. Также рекомендуется придумать специальное название для <<new,базовой>> разметки.

Новые создаваемые пользовательские разметки рекомендуется называть таким образом, чтобы название разметки соответствовало её назначению. Тогда после добавления данной разметки в _Дерево дизайнов_, будет значительно проще выполнять привязку разметок к ролям и состояниям карточки.

.Чтобы переименовать разметку:
. В области xref:layouts/designer.adoc#list["Список разметок"] выполните любое из действий:
+
* Нажмите на кнопку image:buttons/pencil-green.png[Карандаш] *Переименовать разметку*.
* Вызовите контекстное меню, затем выберите команду _Переименовать разметку_.
+
Поле с названием разметки станет доступным для редактирования.
+
. Введите новое название разметки.
+
Название разметки должно быть уникальным. Если разметка с введённым именем уже присутствует в списке, в поле записи появится специальная иконка, а пользователю будет выведена подсказка с текстом: `Разметка с указанным именем уже существует`. В таком случае следует повторно нажать на кнопку image:buttons/pencil-green.png[Карандаш] и изменить название разметки на уникальное.
+
Название разметки будет изменено. Если разметка уже была добавлена в _Дерево дизайнов_, её название в дереве также будет изменено.

[#copy]
== Копировать разметку из другого вида

.Копирование разметки из другого вида может потребоваться если:
* Для базового типа карточки имеется несколько пользовательских видов, у каждого из которых имеются настроенные разметки.
* В xref:layouts/select-card-kind.adoc[выбранный] в окне _Конструктора разметок_ вид карточки требуется скопировать разметку из другого вида.

Вид для копирования можно выбирать только из дочерних для используемого типа карточки.

Особенности копирования локализации разметки описаны в разделе xref:layouts/layout-localize.adoc[Локализация разметки].

.Чтобы скопировать разметку из другого вида:
. В области xref:layouts/designer.adoc#list["Список разметок"] нажмите на кнопку image:buttons/two-squares.png[Два квадрата] *Копировать разметку из другого вида*.
+
Будет открыто окно для выбора вида из данного типа карточки, при этом доступны для выбора только те виды карточек, для которых настроены разметки.
+
. Выберите вид, из которого требуется скопировать разметку.
+
После выбора вида, из него копируется набор разметок без _Дерева дизайнов_. Если в текущем виде уже были ранее настроены какие-либо разметки, то перед копированием будет выведено предупреждающее сообщение: `Удалить существующие разметки?`
+
. Подтвердите или откажитесь от удаления всех существующих разметок:
+
* Если выбрать вариант _Нет_, новые разметки будут добавлены к существующим.
* Если выбрать вариант _Да_, все ранее добавленные разметки будут удалены.
+
[WARNING]
====
Разметки удаляются безвозвратно!
====
+
Если на разметке текущего вида и копируемого имеется элемент с одинаковым названием и одинаковым типом данных, то при копировании приоритет остается за настройками текущего вида (т.е. текущие настройки элемента не будут заменены). Если же у элементов различается тип данных, то будет создана копия такого элемента (экземпляр с префиксом Копия), а настройки останутся прежними.

[#delete]
== Удалить разметку

Операция удаления разрешена только для разметок, которые не добавлены в _Дерево дизайнов_. При удалении следует иметь в виду, что хотя бы одна разметка обязательно должна присутствовать в _Дереве дизайнов_, поэтому, удаление последней оставшейся разметки в списке всегда будет запрещено.

.Чтобы удалить разметку:
. В области xref:layouts/designer.adoc#list["Список разметок"] выполните любое из действий:
+
* Нажмите на кнопку image:buttons/x-red-squared.png[Крестик в квадрате] *Удалить разметку*.
* Вызовите контекстное меню, затем выберите команду _Удалить разметку_.
+
. Если разметка присутствует в _Дереве дизайнов_, удаление будет запрещено. Пользователю будет выдано сообщение: `Невозможно удалить разметку, потому что она используется видом.`
+
. Если запретов на удаление разметки нет, она будет удалена из списка разметок.
