= Общие настройки системы {dv}

Ветка _Общие настройки_ области _Категории_ содержит настройки, которые будут применены к карточкам библиотеки _Базовые объекты_ системы {dv} 5, а также настройки безопасности, применяемые ко всем типам объектов с данной моделью безопасности.

== Настройки сканирования

Чтобы настроить параметры сканирования, которые будут применяться в системе, выполните следующие действия:

. В области _Категории_ выберите ветку _Общие настройки_ > _Сканирование_.
+
При этом в средней части карточки справочника будет отображена область _Сканирование_.
+
.Системные настройки сканирования
image::Scan.png[Системные настройки сканирования]
+
. В списке _Формат изображения_ определите формат, который по умолчанию будет использоваться для сканирования.
. В списке _Качество для формата JPEG_ определите требуемое качество для сканирования изображений формата JPEG:
+
* *_100_* - Максимальное качество JPEG.
* *_75_* - Стандартное качество JPEG (по умолчанию).
* *_50_* - Среднее качество JPEG.
* *_25_* - Низкое качество JPEG.
+
. В списке _Сжатие при сохранении в PDF_ определите требуемое сжатие изображений форматов `.jpeg`, `.png`, `.tiff`, `.bmp` при их конвертации в формат `.pdf`:
+
* *_Без сжатия_*.
* *_Низкое_*.
* *_Среднее_*.
* *_Высокое_*.
+
[IMPORTANT]
====
Использование функции сжатия в операционных системах Windows XP и Vista может вызывать ошибки. При возникновении ошибок, отключите функцию сжатие.
====
+
Для сжатия используется алгоритм LZW. Рекомендуется использовать низкое сжатие, так как при использовании других степеней происходит сильная потеря качества исходного файла.
+
. Чтобы настроить дополнительные параметры сканирования, перейдите по ссылке _Расширенные настройки_.
+
Будет открыто окно _Сканирование_.
+
.Расширенные настройки сканирования
image::Scan_extra.png[Расширенные настройки сканирования]
+
. В поле _Использовать TWAIN сканеры_ определите тип сканера, используемого в системе для всех пользователей:
* *_True_* -- использовать TWAIN сканер.
* *_False_* -- использовать другой тип сканера (например, WIA).
+
Чтобы включить возможность использовать сканер TWAIN у отдельных пользователей, создайте в реестре Windows следующий параметр: `HKEY_CURRENT_USER\Software\{dv}\Platform\5.5\Client\UseTwain` с типом `DWORD` и значением `1`.
+
Если данная настройка отсутствует, будет использоваться системная настройка.
+
. В поле _Скрывать интерфейс сканера_ определите, будет ли отображаться интерфейс у пользователей при сканировании:
+
* *_True_* -- использовать интерфейса сканера.
* *_False_* -- не использовать интерфейс системы {dv}.
+
. Нажмите на кнопку *ОК*.

== Настройки штрих-кода

Чтобы настроить параметры операций со штрих-кодами, которые могут выполняться из карточек библиотеки _Базовые объекты_, выполните следующие действия:

. В области _Категории_ выберите ветку menu:Общие настройки[Штрих-коды], чтобы открыть область _Штрих-коды_ в средней части справочника.
+
Окно содержит два раздела _Настройки штрих-кода_ и _Настройки печати штрих-кодов_.
+
.Системные настройки сканирования
image::BarCodes.png[Системные настройки сканирования]
+
. В поле _Использовать по умолчанию_ определите набор настроек печати штрих-кодов. Эти настройки будут использованы, если определены наборы для подразделения исполнителя, печатающего штрих-код, и для вида распечатываемого документа.
. В поле _Формат штрих-кода_ определите формат штрих-кода, формируемого системой {dv}:
+
* *_Номер штрих-кода_*;
* *_Дата + Номер_*;
* *_Номер +  Дата_*;
* *_Сервер + Номер_*;
* *_Сервер + Дата + Номер_*;
* *_Сервер + Номер + Дата_*
+
****
*Номер* -- инкрементальный номер штрих-кода, который выдается системным нумератором.

*Дата* -- текущая дата в цифровом формате. Может быть указано только целое число.

*Сервер* -- имя сервера. Допускается использование не более 5 символов, введенных заглавными буквами с использованием латинского шрифта.
****
+
. В поле _Имя сервера_ укажите имя сервера.
. xref:DS_BarCodes_print.adoc[Настройте печать штрих-кодов].

Максимально допустимое количество символов в штрих-коде -- 1024.

=== Настройки печати штрих-кодов

В системе _{dv}_ могут быть заданы несколько вариантов настроек печати штрих-кодов.

Чтобы настроить печать штрих-кода выполните следующие действия:

. xref:DS_BarCodes.adoc[Откройте] окно *Штрих-коды* и найдите область *Настройки печати штрих-кодов*.
. Чтобы добавить новый вариант настроек печати, выполните любое из действий:#
* нажмите на кнопку image:buttons/add.png[image];
* правой кнопкой мыши вызовите контекстное меню, затем выберите команду *Добавить*.
+
Будет открыто окно *Настройки печати штрих-кода*.

image::BarCodes_print.png[Настройки печати штрих-кода]
. В поле *Название настройки* введите название нового набора настроек.
. При необходимости, в разделе *Подразделение и вид документа* задайте ограничения на печать штрих-кода:#
* чтобы данный вариант настроек был доступен только определенному подразделению, выберите опцию *Подразделение*, затем в соседнем поле выберите из _Справочника сотрудников_ название подразделения;
* чтобы данный вариант настроек был доступен всем подразделениям организации, выберите опцию *Все подразделения*;
* чтобы данный вариант настроек был доступен только для определенного вида карточки _Документ_, выберите опцию *Вид документа*, затем в соседнем поле выберите из _Справочника видов карточек_ название вида;
* чтобы данный вариант настроек был доступен в карточках _Документ_ любых пользовательских видов, выберите опцию *Все виды*.
. Чтобы запретить печать штрих-кода, установите флаг *Не печатать штрих-код*.
. Определите место на листе, где будет напечатан штрих-код. Для этого задайте значения *Левая координата (мм)* и *Правая координата (мм)*. Точка пересечения данных координат определит расположение левого верхнего угла поля штрих-кода относительно верхнего левого угла печатного листа.
+
По умолчанию используются следующие значения:

* Левая координата: 5 мм;
* Верхняя координата: 232 мм
. Чтобы печать штрих-кода выполнялась вертикально относительно печатного листа, установите флаг *Вертикальная ориентация*.
+
Координаты печати в этом случае будут определены настройками *Левая координата (мм)* и * Верхняя координата (мм)* аналогично стандартному (горизонтальному) расположению.
. Чтобы сделать более удобным отображение штрих-кода на печатном листе, а также для подстройки под используемый сканер, задайте в поле *Ширина символа* необходимую ширину. При увеличении ширины символа, полосы штрих-кода будут "растягиваться".
+
По умолчанию используется ширина 75 мм.
. В поле *Длина штрих-кода* определите длину штрих-кода.
+
Минимальная длина составляет 7 символов. Если длина сгенерированного штрих-кода окажется больше указанной длины, данная настройка будет проигнорирована.
. Чтобы определить шрифт для штрих-кода:#
[loweralpha]
.. Нажмите на кнопку *Шрифт*.
+
Будет открыто окно *Шрифт*.

image::BarCodes_font.png[Настройка шрифта для печати штрих-кода]

Для корректного отображения шрифтов в данном диалоге необходимо вручную произвести установку шрифтов, используемых в системе: шрифты, которые находятся в папке _\{dv}\5.5\Client\Fonts_ установить в папку _%WINDIR%\Fonts_. Для выполнения данного действия требуется обладать правами администратора на компьютере пользователя.

По умолчанию установлен шрифт _IDAutomationHC39M_, для выбора доступен также шрифт _Free 3 of 9_.

Если шрифты установлены некорректно, при открытии диалога *Шрифт* будет появляться информационное сообщение "Невозможно отобразить диалог настройки шрифтов в связи с ограничением прав доступа". 
.. Определите параметры шрифта, затем нажмите на кнопку *ОК*.
. После того, как все необходимые настройки будут выполнены, нажмите на кнопку *ОК* для сохранения изменений.
. Для изменения и удаления ранее выполненных настроек воспользуйтесь кнопками image:buttons/change.png[image] и image:buttons/delete.png[image].

== Ограничение объема вложений в карточки

Чтобы определить объем вложенных файлов, прикрепляемых к карточкам, выполните следующие действия:

. В области *Категории* выберите ветку *Общие настройки* > *Карточки*.
+
При этом в средней части карточки справочника будет отображена область *Карточки*.

image::Cards.png[Системные настройки ограничений прикрепляемых файлов]
.  Для добавления ограничения нажмите на кнопку image:buttons/add.png[image].
+
При этом будет открыто окно *Ограничения размеров файлов*.

image::FileSizeLimit.png[Ограничения размеров файлов]
. В поле *Название настройки* введите название, которое будет отображаться в таблице *Настройки ограничений прикрепляемых файлов* окна *Карточки*.
. В группе настроек *Подразделение* определите объекты, на которые будут наложены ограничения по объему вложений:#
* чтобы ограничение действовало только для определенного подразделения, выберите опцию *Подразделение*, затем в соседнем поле выберите из _Справочника сотрудников_ название подразделения. Настройки будут распространяться также на дочерние подразделения;
* чтобы ограничение действовало для всех подразделений организации, выберите опцию *Все подразделения*.
. В группе настроек *Общие настройки прикрепляемых файлов* определите:#
* *Максимальный размер файла по умолчанию (КВ)* - определяет ограничение для всех типов файлов. Если значение = 0 КБ, ограничений на объем вложения нет. По умолчанию значение = 0.
* *Суммарный размер файла (КВ)* -  определяет максимальный суммарный объем вложений для всех типов файлов.
. В таблице *Ограничения по типу файлов* задайте различные ограничение по объему для файлов определенных типов:#
* _Название_ - название типа файла. Текстовое поле.
* _Расширение_ - тип расширения файла, для которого задается ограничение. Буквенное обозначение расширения должно быть введено полностью (например, "jpg"). 
* _Макс. р-р файла (КВ)_ - размер файла. Задается в Килобайтах. Значение поля не должно превышать значения полей *Максимальный размер файла по умолчанию (КВ) * и *Суммарный размер файла (КВ)*.
* _Запретить добавление файлов_ - флаг, установленный в поле, запрещает добавление в карточку файлов с указанным расширением.
. Чтобы для некоторых групп сотрудников отключить все ограничения, заданные на данной форме, установите флаг *Не применять ограничения для следующих сотрудников*, затем выберите в поле справа название группы из _Справочника сотрудников_.
. Нажмите на кнопку *ОК*.

== Настройки безопасности

В {dv} поддерживается два режима проверки прав дискреционной безопасности для сотрудников подразделений/групп:

. При проверке прав сотрудника на объект учитываются только права его организации/подразделения/группы.
. При проверке прав сотрудника на объект учитываются права его организации/подразделения/группы, а также права всех вышестоящих организаций/групп.

По умолчанию используется первый режим.

Для изменений режима проверки прав безопасности:

. В области *Категории* выберите ветку *Общие настройки* > *Безопасность*#. При этом в средней части карточки справочника будет отображена область *Безопасность*.
+
image::security.png[Настройки безопасности]
. Установите переключатель *Дискреционные права для групп* в положение:
* Только для участников группы -- при проверке прав учитывать только права сотрудника и права его непосредственного подразделения/организации/группы.
* Включая участников подчинённых групп -- при проверке прав учитывать права сотрудника и права его подразделения/организации/группы, а также всех вышестоящих организаций/групп.

