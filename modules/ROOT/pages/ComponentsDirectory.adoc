[[ariaid-title1]]
== Справочник компонентов

[.dfn .term]_Справочник компонентов_ является хранилищем программных компонентов, которые могут быть по запросу установлены на компьютер пользователя Docsvision. Установка программных компонентов осуществляется автоматически, если необходимые Windows-клиенту компоненты отсутствуют на компьютере пользователя, и загружены в хранилище программных компонентов ([.dfn .term]_Справочник компонентов_).

[.dfn .term]_Справочник компонентов_ обладает встроенной системой учета версий, которая обеспечивает возможность автоматического обновления компонентов, установленных на компьютеры пользователей.

Компоненты, загруженные в [.dfn .term]_Справочник компонентов_, объединяются в группы компонентов. Принцип формирования групп определяет инженер Docsvision.

[.dfn .term]_Справочник компонентов_ предназначен для распространения только .NET-сборок.

*Принцип работы механизма распространения компонентов*

. Пользователь выполняет операцию, которая требует использования внешнего компонента.
+
Примеры: пользователь запускает Windows-клиент, к которому подключено расширение; пользователь открывает карточку, к скрипту которой подключена библиотека DLL.
. Windows-клиент пытается получить необходимый компонент из файловой системы компьютера пользователя: по стандартным путям (каталог программы, GAC) и в каталоге распространяемых компонентов ([.ph .filepath]`%temp%\DV5.5\Deploy\`).
* Если файл найден по стандартным путям, механизм распространения компонентов не используется.
* Если файл найден в каталоге распространяемых компонентов, проверяется версия его группы, указанная в файле описания: [.ph .filepath]`%temp%\DV5.5\Deploy\[Группа компонентов]\group.info`.
** Если версия группы компонентов не изменилась, возвращается данный компонент.
** Если версия группы компонентов изменилась, проверяется версия компонента, которая указана в папке компонента: [.ph .filepath]`%temp%\DV5.5\Deploy\[Группа компонентов]\[Название компонента]_[Версия компонента]`.
*** Если версия компонента не изменилась, возвращается данный компонент.
*** Если версия компонента изменилась, из [.dfn .term]_Справочника компонентов_ загружается новая версия; возвращается новая версия компонента.
* Если файл не найден, проверяется его наличие в [.dfn .term]_Справочнике компонентов_.
** Если компонент с искомым названием (например, «Cia.MessControl.dll») зарегистрирован в [.dfn .term]_Справочнике компонентов_, он загружается на компьютер пользователя в папку [.ph .filepath]`%temp%\DV5.5\Deploy\[Группа компонентов]\[Название компонента]_[Версия компонента]`; возвращается загруженная версия компонента.
** Если компонент не зарегистрирован в [.dfn .term]_Справочнике компонентов_, выполняется предусмотренное программой действие (например, возвращается ошибка).
+
Обратите внимание, что загруженные из [.dfn .term]_Справочника компонентов_ файлы хранятся в каталоге [.ph .filepath]`%temp%\DV5.5\Deploy\[Группа компонентов]\[Название компонента]_[Версия компонента]`. Данную особенность необходимо учитывать при подключении компонентов к Windows-клиенту, если компоненты подключаются с указанием полного пути.

=== Описание пользовательского интерфейса «Справочника компонентов»

Ниже представлено главное окно [.dfn .term]_Справочника компонентов_.

image::img/componentsDirectoryMainWindow.png[[.fig--title-label]##Figure 1. ##Главное окно «Справочника компонентов»]

Главное окно [.dfn .term]_Справочника компонентов_ содержит:

* Панель инструментов с кнопками:
** image:img/Buttons/saveComponentsDirectory.png[image] – сохраняет настройки [.dfn .term]_Справочника компонентов_;
** image:img/Buttons/addComponentsGroup.png[image] – добавляет новую группу компонентов;
** image:img/Buttons/removeComponentsGroup.png[image] – удаляет выбранную группу компонентов;
** image:img/Buttons/addComponentToGroup.png[image] – добавляет компоненты в выбранную группу компонентов;
** image:img/Buttons/removeComponentFromGroup.png[image] – удаляет выбранный компонент из группы компонентов;
* Список групп компонентов;
* Описание группы компонентов – содержит информацию о выбранной группе:
** иконка, связанная с группой (отображается только в справочнике);
** название группы;
** дополнительное описание;
** текущая версия группы компонентов (номер автоматически увеличивается при изменении группы);
** Список файлов группы – содержит информацию о компонентах, включенных в группу:
*** название файла;
*** версия файла;
*** даты создания и изменения.

* *xref:../topics/OpenComponentsGroup.adoc[Открытие «Справочника компонентов»]* +
* *xref:../topics/AddComponentsGroup.adoc[Создание группы компонентов]* +
* *xref:../topics/RemoveComponentsGroup.adoc[Удаление группы компонентов]* +
* *xref:../topics/AddComponentToGroup.adoc[Добавление компонентов в «Справочник компонентов»]* +
* *xref:../topics/RemoveComponentFromGroup.adoc[Удаление компонентов из «Справочника компонентов»]* +
* *xref:../topics/UpdateComponentInGroup.adoc[Обновление версии компонента в «Справочнике компонентов»]* +
* *xref:../topics/ComponentsDictionaryNotice.adoc[Особенности использования механизма распространения компонентов]* +
