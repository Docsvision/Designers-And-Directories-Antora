= Настройка "Матрицы доступа"

_Матрица доступа_ -- таблица соответствия ролей разрешённым операциям для данного вида карточек.

.Матрица доступа синхронизируется с Конструктором состояний по xref:states/edit-operations.adoc#standard[операциям редактирования]:
* Для запрещённых операций назначение прав недоступно.
* В таблице прав недоступен просмотр состояний, для которых в _Конструкторе состояний_ не настроены операции перехода. Ни входящие, переводящие карточку из данного состояния в другое, ни исходящие, переводящих карточку из другого состояния в данное.
+
Если у состояния отсутствует операция перехода, но оно является начальным, состояние будет отображаться в _Матрице доступа_. См. также <<rights,Назначение прав доступа>>.
+
* В таблице отображается всплывающая подсказка с описанием операции, указанным в свойствах xref:states/edit-operations.adoc[операции редактирования] в _Конструкторе состояний_.

[#rights]
== Назначить права доступа

.Права доступа для операции задаются путем проставления меток в матрице доступа:
* image:buttons/check.png[Зелёная галочка] -- разрешена.
* image:buttons/empty-square.png[Пустой квадрат] -- не разрешена.
* image:buttons/grey-square.png[Серый квадрат] или image:buttons/grey-square-checked.png[Серый квадрат с галочкой] -- недоступна в _Конструкторе состояний_.
* image:buttons/x-red.png[Красный крестик] -- запрещена.

.Особенности настройки прав доступа:
****
.. Права _Дискреционной_ безопасности и ролевой модели суммируются. Например, если по ролевой модели операция "не разрешена", то права соблюдаются в соответствии с дискреционной безопасностью.
+
Если по дискреционной безопасности операция "не разрешена", а в ролевой модели явно указана (операции "запрещена" и "разрешена"), то права соблюдаются в соответствии с ролевой моделью.
+
Если в ролевой модели или дискреционной безопасности указывается явный запрет на операцию ("запрещена"), то в любом случае эта операция будет "не разрешена".
+
.. Настройки в _Конструкторе состояний_ имеют более высокий приоритет, чем настройки в _Конструкторе ролей_.
****

NOTE: В окне назначения прав доступа поддерживается поиск прав, который активируется сочетанием клавиш kbd:[Ctrl + F].

.Чтобы назначить права доступа:
. Установите требуемую метку прав доступа щелчком левой клавиши мыши на отображаемой метке.
+
* _Не разрешено_. Данная метка установлена по умолчанию.
* _Разрешено_.
* _Запрещено_.
+
Возможные состояния метки меняются "по кругу". Чтобы сменить метку, повторно щелкните левой клавишей мыши по ней.
+
.Назначение прав доступа
image::access-rights.png[Назначение прав доступа]

[start=2]
.Чтобы установить одно значение всем элементам строки или столбца:
. Для строки -- щелкните по нужной кнопке в заголовке требуемой строки.
. Для столбца -- щелкните по кнопке в заголовке требуемого столбца.
. Для всей таблицы прав -- щелкните по кнопке на пересечении заголовков строки и столбца.
+
.Кнопки для настройки прав во всей таблице
image::set-whole-table.png[Кнопки для настройки прав во всей таблице]
+
[WARNING]
====
Для операций, xref:states/edit-operations.adoc[недоступных] в _Конструкторе состояний_, выставление меток запрещено.
====

[#info]
== Получить сведения о правах пользователей

.Чтобы получить отчёт о правах пользователя:
. Перейдите на вкладку _Матрица доступа_.
. Так как пользователь может исполнять несколько ролей, то предварительно в поле _Тип объекта_ выберите _Роль,_ а в поле _Объект_ -- роль, для которой нужно получить отчёт о правах.
. Перейдите в область _Ролевой фильтр_.
. В поле _Сотрудник_ нажмите на кнопку с многоточием, затем выберите нужного пользователя из _Справочника сотрудников_.
. В поле _Карточка_ нажмите на кнопку с многоточием, затем выберите нужную карточку из доступных в приложении {wincl}.
. Установите флаг `*Включить фильтр ролей*`.
+
.Права пользователя отобразятся в виде значков в матрице доступа:
* image:buttons/check.png[Зелёная галочка] -- пользователю разрешён доступ.
* image:buttons/empty-square.png[Пустой квадрат] -- пользователю запрещен доступ, если хотя бы в одной из исполняемых им ролей нет явного разрешения (то есть установленного флага).
* image:buttons/x-red.png[Красный крестик] -- доступ не разрешён в любом случае.
